@layer components {
  div.select {
    [popover].popover {
      @apply p-1 min-w-[anchor-size(width)];
      
      

      [role='option'] {
        @apply aria-hidden:hidden [&_svg]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none [&_svg]:shrink-0 [&_svg]:size-4 aria-disabled:opacity-50 aria-disabled:pointer-events-none disabled:opacity-50 disabled:pointer-events-none w-full truncate;
        
        &[aria-selected='true'] {
          @apply bg-[image:var(--check-icon)] bg-no-repeat bg-position-[center_right_0.5rem] bg-size-[0.875rem];
        }
      }
      [role='listbox'] [role='heading'] {
        @apply flex text-muted-foreground px-2 py-1.5 text-xs;
      }
      [role='listbox'] [role='group']:not(:has([role='option']:not([aria-hidden='true']))) {
        @apply hidden;
      }
      [role='separator'] {
        @apply border-border -mx-1 my-1;
      }
      > header {
        @apply flex h-9 items-center gap-2 border-b px-3 -mx-1 -mt-1 mb-1;

        svg {
          @apply size-4 shrink-0 opacity-50;
        }
        input[role='combobox'] {
          @apply placeholder:text-muted-foreground flex h-10 flex-1 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50 min-w-0;
        }
      }
      [role='listbox']:not(:has([data-value]:not([aria-hidden='true'])))::before {
        @apply flex items-center justify-center p-6 text-sm truncate;
      }
      [role='listbox'][data-empty]:not(:has([data-value]:not([aria-hidden='true'])))::before {
        @apply content-[attr(data-empty)];
      }
      [role='listbox']:not([data-empty]):not(:has([data-value]:not([aria-hidden='true'])))::before {
        @apply content-['No_results_found'];
      }
    }

    &:not([data-select-initialized]) [role='option']:hover,
    &[data-select-initialized] [role='option'].active,
    &[data-select-initialized] [role='option']:focus-visible {
      @apply bg-accent text-accent-foreground;
    }
  }
  .dropdown-menu {
    [popover].popover {
      @apply p-1;
      min-width: anchor-size(width);

      [role='menuitem'],
      [role='menuitemcheckbox'],
      [role='menuitemradio'] {
        @apply aria-hidden:hidden [&_svg]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none [&_svg]:shrink-0 [&_svg]:size-4 aria-disabled:opacity-50 aria-disabled:pointer-events-none disabled:opacity-50 disabled:pointer-events-none w-full truncate;
        @apply focus-visible:bg-accent focus-visible:text-accent-foreground hover:bg-accent hover:text-accent-foreground;
        &.active {
          @apply bg-accent text-accent-foreground;
        }
      }
      [role='menu'] [role='heading'] {
        @apply flex px-2 py-1.5 text-sm font-medium;
      }
      [role='separator'] {
        @apply border-border -mx-1 my-1;
      }
    }
  }
}

@layer components {
  [popover].popover {
    @apply absolute inset-auto bg-popover text-popover-foreground overflow-x-hidden overflow-y-auto p-4 rounded-md border shadow-md z-50 visible opacity-0 scale-95 w-max transition-all transition-discrete; 

    &:not([data-side]),
    &[data-side='bottom'] {
      @apply -translate-y-2;
    }
    &[data-side='top'] {
      @apply translate-y-2;
    }
    &[data-side='left'] {
      @apply translate-x-2;
    }
    &[data-side='right'] {
      @apply -translate-x-2;
    }
    &:not([data-side]),
    &[data-side='bottom'] {
      @apply mt-1 top-[anchor(bottom)];
    }
    &[data-side='top'] {
      @apply mb-1 bottom-[anchor(top)];
    }
    &[data-side='left'] {
      @apply mr-1 right-[anchor(left)];
    }
    &[data-side='right'] {
      @apply ml-1 left-[anchor(right)];
    }
    &:not([data-side]),
    &[data-side='bottom'],
    &[data-side='top'] {
      &:not([data-align]),
      &[data-align='start'] {
        @apply left-[anchor(left)];
      }
      &[data-align='end'] {
        @apply right-[anchor(right)];
      }
      &[data-align='center'] {
        @apply left-[anchor(center)] -translate-x-1/2;
      }
    }
    &[data-side='left'],
    &[data-side='right'] {
      &:not([data-align]),
      &[data-align='start'] {
        @apply top-[anchor(top)];
      }
      &[data-align='end'] {
        @apply bottom-[anchor(bottom)];
      }
      &[data-align='center'] {
        @apply top-[anchor(center)] -translate-y-1/2;
      }
    }
    &:is(:popover-open) {
      @apply opacity-100 scale-100 translate-x-0 translate-y-0;

      @starting-style {
        @apply opacity-0 scale-95;

        &:not([data-side]),
        &[data-side='bottom'] {
          @apply -translate-y-2;
        }
        &[data-side='top'] {
          @apply translate-y-2;
        }
        &[data-side='left'] {
          @apply translate-x-2;
        }
        &[data-side='right'] {
          @apply -translate-x-2;
        }
      }
    }
    
  }
}